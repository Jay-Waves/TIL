## 重复操作
用于避免操作复杂时，重复输入多组复杂命令。
| 重复类型     | 重复操作符  | 回退操作符 |
| ------------ | ----------- | ---------- |
| 文本改变重复 | .           | u          |
| 行内查找重复 | ;           | ,          |
| 全文查找重复 | n           | N          |
| 文本替换重复 | &           | u          |
| 宏重复       | @\[寄存器\] | u           |

### 解释与例子
1. 用x删除单个字符， `.`重复
2. `f{char}`行内查找字符，`;`查找下一个，`,`上一个。

## 剪贴板寄存器
> 详见[[复制_黏贴_剪切_删除#剪贴板]]
> #vim寄存器 

### 剪贴板追加内容
宏寄存器, 剪贴板寄存器都可以向已经有内容的寄存器中追加新内容. 方法是使用对应寄存器的小写字母
比如: `"ayy, 10j, "Ayy` 复制当前行到寄存器a, 然后下移十行, 复制到寄存器A.
宏录制同理: `qa, qA`

## 宏录制
vim中宏录制可以记录你一系列操作，并保存到寄存器里，使用`@{寄存器}`就能重复应用整个宏。详细格式如`@{0-9a-z".=*+}`
1. 使用`q{reg}`来录制
2. 再次使用q结束录制
3. 使用`@{reg}`来使用某个宏录制. 使用`@@`来使用上次使用的寄存器.

- 例子
1. 对行内字符进行替换，然后录制为宏。之后用此宏对多行进行相同操作
2. 复制`this is number1`黏贴到下一行，并将数字增加。如此重复十次，最后一行为`this is number12`
	这里用到vim的一个技巧：`^a`会从光标向后查找离光标最近的数字，并增加1；同理，`^x`会减一。
	录制宏：`qa,yy,p,^a,q`,然后`10@a`
	
#### 数字递增
vim可以识别不同进制的递增:`:set nrformats=hex`就改成识别十六进制(需要有0x前缀).
具体信息如下:
![[Pasted image 20221205214504.png]]

### 定义快捷键
**理论上, vim能实现的操作就都能进行键映射, 这是因为vim记录键映射不是记录功能, 而是记录文本, 它会将记录的文本原样输入一遍, 而不会去解释它**
如`:map ^M I#<ESC>`用^M替换操作“在行首插入#”。
又如`:map ^D Ahelloworld<ECS>`表示用^D执行在行尾添加helloworld字符串。
`:nmap <tab> V>`, `:nmap <S-tab> V<`用tab键控制缩进

1. 取消映射 `unmap <key>`
2. 首列模式标记:
	- n `namp` 常规模式下生效
	- v 可视化模式
	- o 运算符模式
	- ! 命令行模式, 插入模式
	- i 插入模式
	- c 命令模式
3. 生僻按键:
	- ctrl: `<C>`, 如`<C-ESC>`
	- alt: `<A-key>`
	- shift: `<S-key>`
	- 回车entre: `<CR>`
4. trick:
	- 可以映射命令, 但是记得最后加一个回车, 否则不会执行. 如统计中文字符`nmap <F2> :%s/[\u4E00-\u9FCC]/&/g<CR>`
